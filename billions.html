<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>3illions — Mobile Safe Mode</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#000; --panel:#0b0c0f; --card:#111317;
    --ink:#eef1f5; --ink2:#c9d0d7; --ink3:#9aa3ad;
    --b1:rgba(255,255,255,.12); --b2:rgba(255,255,255,.16); --pill:rgba(255,255,255,.06);
  }
  *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
  html,body{height:100%;margin:0}
  body{background:var(--bg);color:var(--ink);font-family:'Orbitron',system-ui,sans-serif;overflow:hidden}

  /* HUD */
  .hud{
    position:fixed; left:0; right:0; top:0; height:64px;
    padding:env(safe-area-inset-top) 12px 0 12px; /* top, right, bottom, left */
    display:flex; align-items:center; justify-content:space-between;
    background:linear-gradient(180deg,rgba(0,0,0,.6),rgba(0,0,0,0));
    z-index:10;
  }
  .brand{display:flex;align-items:center;gap:10px}
  .logo{width:34px;height:34px;border-radius:10px;border:1px solid var(--b1);background:linear-gradient(#1a1c21,#0d0f13)}
  .pill{border:1px solid var(--b1);background:var(--pill);color:var(--ink2);padding:7px 12px;border-radius:999px;font-size:12px;letter-spacing:.08em;text-transform:uppercase}
  .timer{position:relative;width:42px;height:42px;display:grid;place-items:center}
  .timer svg{transform:rotate(-90deg)}
  .tspan{position:absolute;font-size:11px}

  /* Bottom space for safe area */
  .spacer{height:calc(env(safe-area-inset-bottom) + 8px)}

  /* Containers — NATIVE scroll first */
  .vertical{
    position:relative; height:100vh; width:100vw;
    overflow-y:auto; scroll-snap-type:y mandatory; scroll-snap-stop:always;
    padding-top:64px; /* HUD space */
    background:var(--bg);
  }
  .section{
    height:calc(100vh - 64px); /* fits under HUD */
    scroll-snap-align:start;
    display:flex; flex-direction:column; gap:12px;
    padding:10px 10px 0;
    background:var(--bg);
  }
  .head{display:flex;align-items:center;justify-content:space-between}
  .head .name{font-size:12px;color:var(--ink3);letter-spacing:.12em}
  .head .hint{font-size:11px;color:var(--ink3)}

  .row{
    flex:1; width:100%;
    display:flex; gap:12px;
    overflow-x:auto; scroll-snap-type:x mandatory; scroll-snap-stop:always;
    -webkit-overflow-scrolling:touch;
  }
  .card{
    flex:0 0 100vw; height:100%;
    border:1px solid var(--b1); border-radius:16px; overflow:hidden;
    background:var(--card);
    display:grid; grid-template-columns:1fr 1fr;
  }
  .pane{
    position:relative; display:flex; align-items:center; justify-content:center;
    background:linear-gradient(150deg,#0f1216,#07090c);
    color:#7b828d; font-size:16px; letter-spacing:.08em;
  }
  .badge{
    position:absolute; top:10px; left:10px;
    display:flex; align-items:center; gap:8px;
    font-size:12px; color:var(--ink);
    padding:6px 10px; border-radius:999px; border:1px solid var(--b1); background:rgba(0,0,0,.45); backdrop-filter:blur(6px)
  }
  .aud{position:absolute; bottom:10px; right:10px; font-size:12px; color:var(--ink3)}
  .vote{position:absolute; bottom:10px; left:10px; font-size:12px; color:var(--ink); padding:8px 14px; border-radius:999px; border:1px solid var(--b2); background:linear-gradient(180deg,rgba(255,255,255,.10),rgba(255,255,255,.04))}
</style>
</head>
<body>
  <header class="hud">
    <div class="brand"><div class="logo"></div><div>3illions</div></div>
    <div class="pill" id="catPill">ALL</div>
    <div class="timer" aria-live="polite">
      <svg width="42" height="42" viewBox="0 0 40 40">
        <circle cx="20" cy="20" r="18" stroke="rgba(255,255,255,.15)" stroke-width="3" fill="none"/>
        <circle id="tArc" cx="20" cy="20" r="18" stroke="#fff" stroke-opacity=".9" stroke-width="3" fill="none" stroke-linecap="round" stroke-dasharray="113.097" stroke-dashoffset="0"/>
      </svg>
      <span class="tspan" id="tTxt">60</span>
    </div>
  </header>

  <main class="vertical" id="vp">
    <!-- Sections/rows are injected by JS so you see content immediately -->
  </main>
  <div class="spacer"></div>

<script>
/* --- DATA (placeholders so you’ll see content even w/o assets) --- */
const FEED = [
  { category:'ALL', slides:[
    {L:'USER 1', l:'@Alpha', la:239, R:'USER 2', r:'@Omega', ra:221},
    {L:'NOVA', l:'@Nova', la:198, R:'VEX', r:'@Vex', ra:204},
    {L:'RAZE', l:'@Raze', la:176, R:'MYTH', r:'@Myth', ra:182}
  ]},
  { category:'ART', slides:[
    {L:'BRUSH', l:'@BrushKing', la:97, R:'CANVAS', r:'@CanvasQueen', ra:105},
    {L:'INK', l:'@InkSoul', la:112, R:'MUSE', r:'@NeoMuse', ra:109}
  ]},
  { category:'FASHION', slides:[
    {L:'STYLE', l:'@StyleIcon', la:155, R:'THREAD', r:'@ThreadQueen', ra:144}
  ]},
  { category:'RAP BATTLE', slides:[
    {L:'FLAME', l:'@MicFlame', la:312, R:'LYRIC', r:'@LyricBeast', ra:333},
    {L:'CIPHER', l:'@Cipher', la:301, R:'8-BAR', r:'@EightBar', ra:289}
  ]},
];

const vp = document.getElementById('vp');
function el(t,a={},kids=[]){const n=document.createElement(t);for(const[k,v]of Object.entries(a)){if(k==='class')n.className=v;else if(k==='dataset')Object.entries(v).forEach(([dk,dv])=>n.dataset[dk]=dv);else if(k==='html')n.innerHTML=v;else n.setAttribute(k,v)}kids.forEach(c=>n.appendChild(c));return n;}
function pane(label, handle, aud){
  const p = el('div',{class:'pane',html:label});
  const badge = el('div',{class:'badge',html:handle});
  const vote = el('button',{class:'vote',html:'Vote'});
  const aud = el('div',{class:'aud',html:`● ${aud}`});
  const box = el('div',{style:'position:relative;height:100%'},[p,badge,vote,aud]);
  return box;
}
function card(s){ const c=el('div',{class:'card'}); c.appendChild(pane(s.L,s.l,s.la)); c.appendChild(pane(s.R,s.r,s.ra)); return c; }
FEED.forEach(row=>{
  const sec = el('section',{class:'section'});
  sec.appendChild(el('div',{class:'head'},[
    el('div',{class:'name',html:row.category}),
    el('div',{class:'hint',html:'Swipe →'})
  ]));
  const rowEl = el('div',{class:'row',dataset:{category:row.category}});
  row.slides.forEach(s=>rowEl.appendChild(card(s)));
  sec.appendChild(rowEl);
  vp.appendChild(sec);
});

/* --- HUD: Category + Timer --- */
const catPill = document.getElementById('catPill');
const tArc = document.getElementById('tArc');
const tTxt = document.getElementById('tTxt');
const CIRC = 2*Math.PI*18; tArc.setAttribute('stroke-dasharray', CIRC.toFixed(3));
let round=1, timeLeft=60, maxRounds=3, tInt=null;
function setTimer(){ tTxt.textContent=String(timeLeft); const r=timeLeft/60; tArc.setAttribute('stroke-dashoffset',((1-r)*CIRC).toFixed(3)); }
function startTimer(){ clearInterval(tInt); setTimer(); tInt=setInterval(()=>{ if(timeLeft>0){timeLeft--;setTimer();} else {clearInterval(tInt); if(round<maxRounds){round++; tTxt.textContent='⏸'; setTimeout(()=>{timeLeft=60; startTimer();}, 6000);} else {tTxt.textContent='0';}} },1000); }
startTimer();

/* --- Native scroll-aware label --- */
const rows = Array.from(document.querySelectorAll('.row'));
function vh(){return vp.clientHeight;}
function activeVIndex(){return Math.round(vp.scrollTop/vh());}
function activeRow(){return rows[activeVIndex()]||rows[0];}
function syncCat(){ catPill.textContent = activeRow()?.dataset.category || FEED[0].category; }
vp.addEventListener('scroll', ()=>{ syncCat(); }, {passive:true}); syncCat();

/* --- Optional diagonal drag that DOES NOT block native scrolling --- */
let drag={on:false,id:null,x:0,y:0};
const hasPE='onpointerdown'in window;

/* We never call preventDefault on move; native scrolling stays alive. */
function startDrag(x,y,id){ drag.on=true; drag.id=id; drag.x=x; drag.y=y; }
function moveDrag(x,y){
  if(!drag.on) return;
  const dx=x-drag.x, dy=y-drag.y;
  // assist both axes (small nudge) while native scroll also runs
  vp.scrollTop -= dy*0.5;
  activeRow().scrollLeft -= dx*0.5;
  drag.x=x; drag.y=y;
}
function endDrag(){ drag.on=false; }

if(hasPE){
  vp.addEventListener('pointerdown',e=>{ if(e.target.closest('button,a')) return; startDrag(e.clientX,e.clientY,e.pointerId); },{passive:true});
  vp.addEventListener('pointermove',e=>{ if(!drag.on||drag.id!==e.pointerId) return; moveDrag(e.clientX,e.clientY); },{passive:true});
  const off=e=>{ if(drag.id===e.pointerId) endDrag(); };
  vp.addEventListener('pointerup',off,{passive:true});
  vp.addEventListener('pointercancel',off,{passive:true});
}else{
  vp.addEventListener('touchstart',e=>{ if(e.target.closest('button,a')) return; const t=e.touches[0]; startDrag(t.clientX,t.clientY,0); },{passive:true});
  vp.addEventListener('touchmove',e=>{ const t=e.touches[0]; moveDrag(t.clientX,t.clientY); },{passive:true});
  vp.addEventListener('touchend',endDrag,{passive:true});
  vp.addEventListener('touchcancel',endDrag,{passive:true});
}
</script>
</body>
</html>
