<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>3ATTL33ILLIONS | Profile</title>

  <!-- Virgo font (local) -->
  <style>
    @font-face{
      font-family:'Virgo';
      src:
        url('assets/fonts/Virgo.woff2') format('woff2'),
        url('assets/fonts/Virgo.ttf') format('truetype');
      font-display:swap;
    }
  </style>

  <style>
    :root{
      --bg:#000000;
      --panel:#0e0e0f;
      --ink:#e9edf1;
      --ink-2:#cfd6dd;
      --ink-3:#9aa3ad;
      --stroke:rgba(255,255,255,.08);
      --ring:0 0 0 3px rgba(255,255,255,.12);
      --gold-1:#F5D76E;
      --gold-2:#F0B90B;
      --gold-3:#FFD15C;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--ink);
      font-family:'Virgo', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      letter-spacing:.2px;
    }

    /* Page wrapper (works as standalone or fragment) */
    .profile-wrap{max-width:1000px;margin:0 auto;padding:14px 12px 24px}
    .appbar{
      height:44px; display:flex; align-items:center; justify-content:space-between;
      padding:0 6px 0 4px; margin-bottom:8px;
    }
    .iconbtn{
      width:36px;height:36px;border-radius:10px;border:1px solid var(--stroke);
      display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,.05);
      cursor:pointer;transition:transform .2s, background .2s;
    }
    .iconbtn:hover{transform:translateY(-1px); background:rgba(255,255,255,.08)}
    .app-title{
      font-weight:900; letter-spacing:.4px; font-size:14px; color:#fff; opacity:.95;
    }

    /* Header — avatar + name + actions */
    .header{
      display:grid; grid-template-columns:auto 1fr; gap:14px;
      padding:14px; border:1px solid var(--stroke); border-radius:16px; background:rgba(255,255,255,.04);
      backdrop-filter:blur(6px);
    }
    .avatar{
      width:96px;height:96px;border-radius:24px;overflow:hidden;box-shadow:0 0 0 2px rgba(255,255,255,.06)
    }
    .avatar img{width:100%;height:100%;object-fit:cover;display:block}
    .uinfo{display:flex; flex-direction:column; gap:10px}
    .urow{
      display:flex; align-items:center; gap:10px; flex-wrap:wrap;
    }
    .name{font-size:20px; font-weight:900}
    .handle{font-size:12px; color:var(--ink-3)}
    .actions{display:flex; gap:8px; flex-wrap:wrap}
    .btn{
      border:1px solid var(--stroke); border-radius:12px; padding:8px 12px; cursor:pointer;
      font-weight:800; background:#fff; color:#111; transition:transform .2s, filter .2s;
      display:flex; align-items:center; gap:8px; font-size:12px;
    }
    .btn:hover{transform:translateY(-1px); filter:brightness(.95)}
    .btn.secondary{background:transparent; color:var(--ink)}
    .btn img{width:16px;height:16px;object-fit:contain}
    .btn.rank{
      background:linear-gradient(90deg,#4f4f4f,var(--gold-2),#4f4f4f); background-size:200% 100%;
      color:#101; border-color:rgba(240,185,11,.55); box-shadow:0 0 14px 2px rgba(240,185,11,.25);
      animation:shimmer 4s linear infinite;
    }
    @keyframes shimmer{0%{background-position:0% 50%}100%{background-position:200% 50%}}

    /* Stats row */
    .stats{
      display:flex; gap:16px; margin-top:8px; flex-wrap:wrap;
    }
    .stat{
      display:flex; flex-direction:column; padding:10px 12px; border:1px solid var(--stroke);
      background:var(--panel); border-radius:14px; min-width:120px;
    }
    .stat .num{font-size:20px; font-weight:900}
    .stat .lbl{font-size:11px; color:var(--ink-2); letter-spacing:.3px}

    /* Bio + links */
    .bio{
      margin-top:10px; border:1px solid var(--stroke); border-radius:14px; padding:12px 14px; background:rgba(255,255,255,.04)
    }
    .bio .line{font-size:13px; color:var(--ink-2)}
    .links{margin-top:8px; display:flex; flex-wrap:wrap; gap:8px}
    .linkpill{
      border:1px solid var(--stroke); color:#fff; background:rgba(255,255,255,.07);
      padding:6px 10px; border-radius:999px; font-size:12px; cursor:pointer;
      transition:transform .2s, background .2s;
    }
    .linkpill:hover{transform:translateY(-1px); background:rgba(255,255,255,.12)}

    /* Highlights (stories style) */
    .highlights{display:flex; gap:12px; padding:12px 2px 0; overflow:auto}
    .hl{
      width:76px; min-width:76px; display:flex; flex-direction:column; align-items:center; gap:6px; cursor:pointer;
    }
    .hl .ring{
      width:64px;height:64px;border-radius:50%;padding:2px;background:
        conic-gradient(var(--gold-2),var(--gold-1),var(--gold-3),var(--gold-2));
    }
    .hl .ring .inner{width:100%;height:100%;border-radius:50%;background:#000;display:flex;align-items:center;justify-content:center; overflow:hidden}
    .hl img{width:100%;height:100%;object-fit:cover;border-radius:50%}
    .hl label{font-size:11px;color:var(--ink-2)}

    /* Tabs */
    .tabs{
      display:flex; gap:4px; margin-top:14px; border:1px solid var(--stroke); border-radius:14px; padding:4px;
      background:rgba(255,255,255,.04);
    }
    .tab{
      flex:1; text-align:center; padding:10px 8px; border-radius:10px; cursor:pointer; font-weight:800; font-size:12px;
      color:var(--ink-2); transition:background .2s, color .2s, transform .2s;
    }
    .tab:hover{background:rgba(255,255,255,.06); color:var(--ink)}
    .tab.active{background:rgba(255,255,255,.12); color:#fff}

    /* Grids */
    .panel{margin-top:10px}
    .grid{
      display:grid; grid-template-columns:repeat(3, 1fr); gap:6px;
    }
    .cell{
      position:relative; border-radius:12px; overflow:hidden; background:#0a0a0a;
      border:1px solid var(--stroke); cursor:pointer;
    }
    .cell img, .cell video{width:100%;height:100%;object-fit:cover;display:block}
    .cell .badge{
      position:absolute; top:6px; left:6px; background:rgba(0,0,0,.45); border:1px solid var(--stroke);
      color:#fff; font-size:10px; padding:2px 6px; border-radius:999px;
      backdrop-filter: blur(4px);
    }

    /* Lightbox preview */
    .lightbox{
      position:fixed; inset:0; display:none; align-items:center; justify-content:center;
      background:rgba(0,0,0,.7); z-index:9999; backdrop-filter:blur(6px);
    }
    .lightbox.show{display:flex}
    .lightbox-card{
      width:min(92vw,900px); background:#0b0b0c; border:1px solid var(--stroke); border-radius:16px; overflow:hidden;
      box-shadow:0 10px 30px rgba(0,0,0,.45);
    }
    .lightbox-media{width:100%; max-height:64vh; background:#000}
    .lightbox-media img, .lightbox-media video{width:100%; height:100%; object-fit:cover; display:block}
    .lightbox-info{padding:12px 14px; display:flex; justify-content:space-between; align-items:center; gap:10px}
    .closebtn{
      border:1px solid var(--stroke); border-radius:10px; background:rgba(255,255,255,.06); color:#fff;
      padding:8px 10px; cursor:pointer; font-weight:800;
    }
    .closebtn:hover{background:rgba(255,255,255,.1)}

    /* Responsive */
    @media (max-width:720px){
      .header{grid-template-columns:auto 1fr}
    }
  </style>
</head>
<body>
  <div class="profile-wrap" data-app-fragment>
    <!-- Top App Bar -->
    <div class="appbar">
      <button class="iconbtn" onclick="go('#/home')" aria-label="Back">
        <!-- chevron-left -->
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
          <path d="M15 18l-6-6 6-6"/>
        </svg>
      </button>
      <div class="app-title">3ATTL33ILLIONS</div>
      <button class="iconbtn" onclick="go('#/settings')" aria-label="Settings">
        <!-- settings -->
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="3"></circle>
          <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06A2 2 0 1 1 3.21 19l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H2a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06A2 2 0 1 1 5.04 3.21l.06.06a1.65 1.65 0 0 0 1.82.33H7a1.65 1.65 0 0 0 1-1.51V2a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06A2 2 0 1 1 20.79 5l-.06.06a1.65 1.65 0 0 0-.33 1.82V7c0 .65.38 1.24 1 1.51.31.15.66.23 1.02.23H22a2 2 0 1 1 0 4h-.09c-.36 0-.71.08-1.02.23-.62.27-1 .86-1 1.51z"/>
        </svg>
      </button>
    </div>

    <!-- Profile Header -->
    <section class="header">
      <div class="avatar"><img id="avatar" src="assets/img/user_me.jpg" alt="Profile avatar"></div>
      <div class="uinfo">
        <div class="urow">
          <div class="name" id="displayName">Commander Nova</div>
          <div class="handle" id="handle">@nova</div>
        </div>
        <div class="actions">
          <!-- Rank (shows number) -->
          <button class="btn rank" onclick="go('#/rank')" aria-label="Open Rank">
            <img src="assets/leaderboard 3d.png" alt="" aria-hidden="true">
            Rank <span id="rankBadge">#27</span>
          </button>
          <!-- Wallet -->
          <button class="btn" onclick="go('#/wallet')" aria-label="Open Wallet">
            <img src="assets/billions 3d.png" alt="" aria-hidden="true">
            Wallet
          </button>
          <!-- Edit -->
          <button class="btn secondary" onclick="go('#/edit-profile')" aria-label="Edit Profile">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M12 20h9"/>
              <path d="M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"/>
            </svg>
            Edit
          </button>
          <!-- Settings -->
          <button class="btn secondary" onclick="go('#/settings')" aria-label="Settings">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06A2 2 0 1 1 3.21 19l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H2a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06A2 2 0 1 1 5.04 3.21l.06.06a1.65 1.65 0 0 0 1.82.33H7a1.65 1.65 0 0 0 1-1.51V2a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06A2 2 0 1 1 20.79 5l-.06.06a1.65 1.65 0 0 0-.33 1.82V7"/>
            </svg>
            Settings
          </button>
        </div>

        <!-- Stats -->
        <div class="stats">
          <div class="stat">
            <div class="num" id="statBattles">27</div>
            <div class="lbl">3ATTLES</div>
          </div>
          <div class="stat">
            <div class="num" id="statFollowers">12.8k</div>
            <div class="lbl">Followers</div>
          </div>
          <div class="stat">
            <div class="num" id="statFollowing">341</div>
            <div class="lbl">Following</div>
          </div>
        </div>

        <!-- Bio -->
        <div class="bio">
          <div class="line" id="bioText">Artist • Rap • Fashion • 3ILLIONS strategist. Building the road to #1.</div>
          <div class="links">
            <a class="linkpill" href="#" onclick="shareProfile();return false;">Share Profile</a>
            <a class="linkpill" href="#" onclick="go('#/battle')">Start a 3ATTLE</a>
            <a class="linkpill" href="#" onclick="go('#/opponents')">Edit Opponents</a>
          </div>
        </div>
      </div>
    </section>

    <!-- Highlights -->
    <div class="highlights" aria-label="Highlights">
      <div class="hl" onclick="go('#/battle')">
        <div class="ring"><div class="inner"><img src="assets/battle 3d.png" alt=""></div></div>
        <label>3ATTLES</label>
      </div>
      <div class="hl" onclick="go('#/leaderboard')">
        <div class="ring"><div class="inner"><img src="assets/leaderboard 3d.png" alt=""></div></div>
        <label>Leaders</label>
      </div>
      <div class="hl" onclick="go('#/rank')">
        <div class="ring"><div class="inner"><img src="assets/leaderboard 3d.png" alt=""></div></div>
        <label>Rank</label>
      </div>
      <div class="hl" onclick="go('#/wallet')">
        <div class="ring"><div class="inner"><img src="assets/billions 3d.png" alt=""></div></div>
        <label>Wallet</label>
      </div>
    </div>

    <!-- Tabs -->
    <div class="tabs" role="tablist">
      <div class="tab active" data-tab="tab-battles" role="tab" aria-selected="true">3ATTLES</div>
      <div class="tab" data-tab="tab-3illions" role="tab" aria-selected="false">3ILLIONS</div>
      <div class="tab" data-tab="tab-wins" role="tab" aria-selected="false">WINS</div>
      <div class="tab" data-tab="tab-tagged" role="tab" aria-selected="false">TAGGED</div>
    </div>

    <!-- Panels -->
    <div class="panel" id="tab-battles">
      <div class="grid" id="gridBattles">
        <!-- cells injected by JS -->
      </div>
    </div>
    <div class="panel" id="tab-3illions" style="display:none">
      <div class="grid" id="grid3illions"></div>
    </div>
    <div class="panel" id="tab-wins" style="display:none">
      <div class="grid" id="gridWins"></div>
    </div>
    <div class="panel" id="tab-tagged" style="display:none">
      <div class="grid" id="gridTagged"></div>
    </div>
  </div>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox" aria-modal="true" role="dialog">
    <div class="lightbox-card">
      <div class="lightbox-media" id="lightboxMedia"></div>
      <div class="lightbox-info">
        <div id="lightboxTitle">Preview</div>
        <button class="closebtn" onclick="closeLightbox()">Close</button>
      </div>
    </div>
  </div>

  <script>
    // SPA-friendly navigation helper
    function go(hash){
      try{
        if (window.parent && window.parent !== window){
          window.parent.location.hash = hash;
        } else {
          location.hash = hash;
        }
      }catch(e){ location.hash = hash; }
    }

    function shareProfile(){
      const url = (window.parent && window.parent !== window) ? window.parent.location.href : location.href;
      if (navigator.share){
        navigator.share({title:'3ATTL33ILLIONS Profile', url}).catch(()=>{});
      } else {
        navigator.clipboard?.writeText(url);
        alert('Profile link copied!');
      }
    }

    // Demo user data (replace with real data later)
    const user = {
      name: 'Commander Nova',
      handle: '@nova',
      avatar: 'assets/img/user_me.jpg',
      rank: 27,
      battles: 27,
      followers: 12842,
      following: 341,
      bio: 'Artist • Rap • Fashion • 3ILLIONS strategist. Building the road to #1.',
      grids: {
        battles: [
          {thumb:'assets/thumbs/b1.jpg', type:'video', title:'Round 3 KO'},
          {thumb:'assets/thumbs/b2.jpg', type:'image', title:'Freestyle Night'},
          {thumb:'assets/thumbs/b3.jpg', type:'image', title:'Auto Drift'},
          {thumb:'assets/thumbs/b4.jpg', type:'video', title:'Debate Finals'},
          {thumb:'assets/thumbs/b5.jpg', type:'image', title:'Runway Heat'},
          {thumb:'assets/thumbs/b6.jpg', type:'video', title:'Chill Vibes'},
        ],
        illions: [
          {thumb:'assets/thumbs/i1.jpg', type:'image', title:'Trending'},
          {thumb:'assets/thumbs/i2.jpg', type:'image', title:'Spotlight'},
          {thumb:'assets/thumbs/i3.jpg', type:'video', title:'Feature'},
        ],
        wins: [
          {thumb:'assets/thumbs/w1.jpg', type:'image', title:'Champion'},
          {thumb:'assets/thumbs/w2.jpg', type:'image', title:'Gold Trophy'},
          {thumb:'assets/thumbs/w3.jpg', type:'video', title:'Crowd Fav'},
        ],
        tagged: [
          {thumb:'assets/thumbs/t1.jpg', type:'image', title:'Collab'},
          {thumb:'assets/thumbs/t2.jpg', type:'video', title:'Duet'},
          {thumb:'assets/thumbs/t3.jpg', type:'image', title:'Feature'},
        ]
      }
    };

    function fmt(n){ return n.toLocaleString(); }

    // Hydrate header
    function hydrateHeader(){
      document.getElementById('displayName').textContent = user.name;
      document.getElementById('handle').textContent = user.handle;
      document.getElementById('avatar').src = user.avatar;
      document.getElementById('rankBadge').textContent = '#'+user.rank;
      document.getElementById('statBattles').textContent = fmt(user.battles);
      document.getElementById('statFollowers').textContent = fmt(user.followers);
      document.getElementById('statFollowing').textContent = fmt(user.following);
      document.getElementById('bioText').textContent = user.bio;
    }

    // Build grids
    function cellHTML(item){
      return `
        <div class="cell" data-type="${item.type}" data-title="${item.title}" data-src="${item.thumb}">
          <img src="${item.thumb}" alt="${item.title}">
          <div class="badge">${item.type === 'video' ? 'VIDEO' : 'PHOTO'}</div>
        </div>
      `;
    }
    function buildGrid(containerId, items){
      const el = document.getElementById(containerId);
      el.innerHTML = items.map(cellHTML).join('');
    }

    // Tabs
    const tabs = document.querySelectorAll('.tab');
    tabs.forEach(t=>{
      t.addEventListener('click', ()=>{
        tabs.forEach(x=>{x.classList.remove('active'); x.setAttribute('aria-selected','false');});
        t.classList.add('active'); t.setAttribute('aria-selected','true');
        const target = t.dataset.tab;
        document.querySelectorAll('.panel').forEach(p=>p.style.display='none');
        document.getElementById(target).style.display='block';
      });
    });

    // Lightbox
    const lightbox = document.getElementById('lightbox');
    const lightboxMedia = document.getElementById('lightboxMedia');
    const lightboxTitle = document.getElementById('lightboxTitle');

    function openLightbox(src, type, title){
      lightboxMedia.innerHTML = type === 'video'
        ? `<video controls autoplay src="${src}" style="max-height:64vh"></video>`
        : `<img src="${src}" alt="${title}">`;
      lightboxTitle.textContent = title || 'Preview';
      lightbox.classList.add('show');
    }
    function closeLightbox(){ lightbox.classList.remove('show'); lightboxMedia.innerHTML=''; }
    lightbox.addEventListener('click', (e)=>{ if(e.target === lightbox) closeLightbox(); });

    // Delegate clicks on grid cells
    document.addEventListener('click', (e)=>{
      const cell = e.target.closest('.cell');
      if(!cell) return;
      const src = cell.dataset.src;
      const type = cell.dataset.type;
      const title = cell.dataset.title;
      openLightbox(src, type, title);
    });

    // Init
    hydrateHeader();
    buildGrid('gridBattles', user.grids.battles);
    buildGrid('grid3illions', user.grids.illions);
    buildGrid('gridWins', user.grids.wins);
    buildGrid('gridTagged', user.grids.tagged);
  </script>
</body>
            </html>
