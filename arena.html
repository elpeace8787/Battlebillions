<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BattleBillions — Arena</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="app" class="app">
    <!-- Top Bar -->
    <header class="topbar">
      <button class="icon-btn" id="navBack" title="Back" aria-label="Back">⟵</button>
      <h1 class="brand">ARENA</h1>
      <a class="icon-btn" id="logoutIcon" href="#/logout" title="Logout" aria-label="Logout">✕</a>
    </header>

    <!-- Main Battle View -->
    <main id="view" class="view">
      <div class="battle-wrap">
        <div class="streams">
          <div class="stream" id="streamA">
            <video id="videoA" autoplay playsinline muted></video>
            <div class="dim" id="dimA"></div>
          </div>
          <div class="stream" id="streamB">
            <video id="videoB" autoplay playsinline muted></video>
            <div class="dim" id="dimB"></div>
          </div>
        </div>
        <!-- Overlay Controls -->
        <div class="overlay-controls" id="controls">
          <span class="pill">Round <b id="roundNow">1</b>/3</span>
          <span class="pill">Turn: <b id="whoseTurn">A</b></span>
          <span class="pill timer">⏱ <b id="timeLeft">30</b>s</span>
          <button class="pill" id="btnStart">Start</button>
          <button class="pill" id="btnSwitch">Switch</button>
          <button class="pill" id="btnNextRound">Next Round</button>
        </div>
      </div>
    </main>

    <!-- Bottom Nav -->
    <nav class="bnav">
      <a href="#/home" class="bnav-link">Home</a>
      <a href="#/discover" class="bnav-link">Discover</a>
      <a href="#/opponent" class="bnav-link">Opponent</a>
      <a href="#/battle" class="bnav-link active">Arena</a>
      <a href="#/leaderboard" class="bnav-link">Ranks</a>
      <a href="#/profile" class="bnav-link">Profile</a>
      <a href="#/settings" class="bnav-link">Settings</a>
    </nav>
  </div>

  <script type="module" src="firebase.js"></script>
  <script type="module" src="auth.js"></script>
  <script type="module" src="battle.js"></script>
  <script type="module">
    import { mountBattle } from './battle.js';
    document.getElementById('navBack').onclick = ()=> history.back();
    mountBattle();
  </script>
</body>
</html>
